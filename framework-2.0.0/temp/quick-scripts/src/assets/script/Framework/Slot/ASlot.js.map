{"version":3,"sources":["assets\\script\\Framework\\Slot\\ASlot.ts"],"names":[],"mappings":";;;;;;AAAA,yGAAoG;AACpG,6FAAwF;AACxF,8DAAwD;AACxD,wFAAmF;AACnF,4EAAuE;AAGvE;IA4BI,eAAsB,SAAoB;QAEtC,IAAI,CAAC,SAAS,GAAG,yBAAe,CAAC,QAAQ,CAAC,SAAS,CAAC;QACpD,IAAI,CAAC,SAAS,GAAG,SAAS,CAAA;QAC1B,IAAI,CAAC,KAAK,GAAG,CAAC,CAAC;QAEf,kCAAwB;aACnB,QAAQ,CAAC,SAAS,CAAC,IAAI,CAAC,uBAAuB,EAAE,EAAE,IAAI,CAAC,CAAC;QAC9D,sCAA4B;aACvB,QAAQ,CAAC,SAAS,CAAC,IAAI,CAAC,2BAA2B,EAAE,EAAE,IAAI,CAAC,CAAC;IAEtE,CAAC;IAED;;;;OAIG;IACK,uCAAuB,GAA/B;QAAA,iBAOC;QANG,IAAI,CAAC,IAAI,CAAC,mBAAmB,EAAE;YAC3B,IAAI,CAAC,oBAAoB,GAAG,IAAI,8BAAoB,CAAC;gBACjD,KAAI,CAAC,mBAAmB,GAAG,IAAI,CAAC;YACpC,CAAC,EAAE,IAAI,CAAC,CAAC;SACZ;QACD,OAAO,IAAI,CAAC,oBAAoB,CAAC;IACrC,CAAC;IAED;;;OAGG;IACK,2CAA2B,GAAnC;QAAA,iBAOC;QANG,IAAI,CAAC,IAAI,CAAC,wBAAwB,EAAE;YAChC,IAAI,CAAC,wBAAwB,GAAG,IAAI,kCAAwB,CAAC,UAAC,SAAS;gBACnE,SAAS,CAAC,CAAC,CAAC,KAAI,CAAC,KAAK,GAAG,KAAI,CAAC,SAAS,CAAC,eAAe,CAAC,CAAC,CAAC,KAAI,CAAC,KAAK,GAAG,CAAC,CAAC;YAC7E,CAAC,EAAE,IAAI,CAAC,CAAC;SACZ;QACD,OAAO,IAAI,CAAC,wBAAwB,CAAC;IACzC,CAAC;IAOL,YAAC;AAAD,CAzEA,AAyEC,IAAA","file":"","sourceRoot":"/","sourcesContent":["import SpeedStateChangeNotification from \"../Process/GameNotification/SpeedStateChangeNotification\";\r\nimport SpeedStateChangeObserver from \"../Process/GameObserver/SpeedStateChangeObserver\";\r\nimport SlotGameManager from '../Process/SlotGameManager'\r\nimport StopNowStateNotification from \"./SlotNotifivation/StopNowStateNotification\";\r\nimport StopNowStateObserver from \"./SlotObserver/StopNowStateObserver\";\r\nimport {StyleData} from './SlotStyleManager'\r\n\r\nexport default abstract class ASlot implements ISlot {\r\n\r\n    protected styleData: StyleData;\r\n\r\n    /**\r\n     * 使否需要即停\r\n     * @type {boolean}\r\n     * @protected\r\n     */\r\n    protected isSlotImmediateStop: boolean;\r\n\r\n    /**\r\n     * 當前的加速狀態\r\n     * @type {boolean}\r\n     * @protected\r\n     */\r\n    protected isSpeedUp: boolean;\r\n\r\n    /**\r\n     * 加速速率 : 無加速狀態 = 1\r\n     * @type {number}\r\n     * @protected\r\n     */\r\n    protected speed: number;\r\n\r\n    protected stopNowStateObserver: StopNowStateObserver;\r\n    protected speedStateChangeObserver: SpeedStateChangeObserver;\r\n\r\n    protected constructor(styleData: StyleData) {\r\n\r\n        this.isSpeedUp = SlotGameManager.instance.isSpeedUp;\r\n        this.styleData = styleData\r\n        this.speed = 1;\r\n\r\n        StopNowStateNotification\r\n            .instance.subscribe(this.getStopNowStateObserver(), true);\r\n        SpeedStateChangeNotification\r\n            .instance.subscribe(this.getSpeedStateChangeObserver(), true);\r\n\r\n    }\r\n\r\n    /**\r\n     * 即停監聽事件\r\n     * @returns {StopNowStateObserver}\r\n     * @private\r\n     */\r\n    private getStopNowStateObserver(): StopNowStateObserver {\r\n        if (!this.isSlotImmediateStop) {\r\n            this.stopNowStateObserver = new StopNowStateObserver(() => {\r\n                this.isSlotImmediateStop = true;\r\n            }, this);\r\n        }\r\n        return this.stopNowStateObserver;\r\n    }\r\n\r\n    /**\r\n     * 加速按鈕監聽事件\r\n     * @private\r\n     */\r\n    private getSpeedStateChangeObserver(): SpeedStateChangeObserver {\r\n        if (!this.speedStateChangeObserver) {\r\n            this.speedStateChangeObserver = new SpeedStateChangeObserver((isSpeedUp) => {\r\n                isSpeedUp ? this.speed = this.styleData.speedUpMultiple : this.speed = 1;\r\n            }, this);\r\n        }\r\n        return this.speedStateChangeObserver;\r\n    }\r\n\r\n    public abstract runSlotAnimation(): Promise<void>;\r\n\r\n    public abstract sineInSlot(): Promise<void>;\r\n\r\n\r\n}"]}